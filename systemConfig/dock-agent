FROM debian:latest
SHELL ["/bin/bash", "-c"]

RUN apt-get update -y && apt-get upgrade -y && apt-get dist-upgrade -y && apt-get autoremove -y
RUN rm -rf /var/lib/apt/lists/*
RUN ln -sfn /usr/share/zoneinfo/America/Mexico_City /etc/localtime

EXPOSE 21
EXPOSE 22

RUN apt-get install sudo -y
RUN apt-get install vsftpd -y

RUN useradd -rm -d /home/jenkins -s /bin/bash jenkins
RUN echo "jenkins:jenks" | chpasswd
RUN chown jenkins:jenkins -R /home/jenkins
RUN chmod 700 -R /home/jenkins
RUN mkdir -p /home/jenkins/agent
RUN chown jenkins:jenkins -R /home/jenkins/agent
RUN chmod 700 -R /home/jenkins/agent

# packages
RUN echo "jenks" | sudo -S apt-get install ssh -y
RUN echo "jenks" | sudo -S apt-get install iputils-ping -y
RUN echo "jenks" | sudo -S apt-get install net-tools -y
RUN echo "jenks" | sudo -S apt-get install iproute2 -y
RUN echo "jenks" | sudo -S apt-get install git -y
RUN echo "jenks" | sudo -S apt-get install tree -y
RUN echo "jenks" | sudo -S apt-get install ranger -y
RUN echo "jenks" | sudo -S apt-get install python3 -y
RUN echo "jenks" | sudo -S apt-get install python3-flask -y
RUN echo "jenks" | sudo -S apt-get install default-jdk -y
RUN echo "jenks" | sudo -S apt-get install default-jre -y
RUN echo "jenks" | sudo -S apt-get install ruby ruby-dev -y
RUN echo "jenks" | sudo -S apt-get install golang -y

# setup
ENTRYPOINT echo "jenks" | sudo -S service ssh start && echo "jenks" | sudo -S service vsftpd start && echo "jenks" | tail -f /dev/null
